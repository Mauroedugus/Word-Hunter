:root{
    --bg: #071023;
    --card: #0f1724;
    --accent: #00b2e3;
    --accent2: #4fd1c5;
    --muted: #9aa4b2;
    --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  html,body,#app{height:100%}
  body {
    margin: 0;
    font-family: 'Fredoka', system-ui, Arial, sans-serif;
    background: 
      linear-gradient(rgba(0, 0, 0, 0.20), rgba(0, 0, 0, 0.25)),
      url("/assets/images/background.png") no-repeat center center fixed;
    background-size: cover;
    color: #e6eef6;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    min-height: 100vh;
  }

  #titleScreen {
    margin: 70% 0 80% 0;
  }
  .content {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .title-actions {
    display: flex;
    justify-content: space-evenly; 
    width: 100%; 
    margin-block: 16px;
  }
  .avatar img{
    width: 300px;
  }
  .avatar-row {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .avatar-row .avatar {
    display: none; /* esconde todos por padrão */
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }
  
  .avatar-row .avatar.selected {
    display: flex; /* mostra apenas o selecionado */
  }

  .row {
    margin-block: 16px;
  }
  
  .screen{
    width:100%;
    max-width:1100px;
    background:var(--glass);
    border-radius:12px;
    padding:20px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6);
  }
  .hidden{display:none}
  
  .centerCard{display:flex;flex-direction:column;align-items:center;gap:16px}
  .centerCard.narrow{max-width:720px;margin:0 auto}
  
  h1{font-size:48px;margin:8px 0}
  h2{font-size:28px;margin:6px 0}
  .muted{color:var(--muted)}
  
  .btnRow{display:flex;gap:12px;margin-top:8px}
  button{padding:12px 18px;border-radius:12px;border:0;cursor:pointer;font-weight:700}
  button.primary{background:linear-gradient(180deg,var(--accent),var(--accent2));color:#022;box-shadow:0 6px 18px rgba(79,209,197,0.08)}
  button.secondary{background:transparent;border:2px solid rgba(255,255,255,0.06);color:#e6eef6}
  button.disabled{opacity:0.35;pointer-events:none}
  
  .avatarsRow{display:flex;gap:24px;align-items:center;justify-content:center;margin:12px 0}
  .avatarOption{display:flex;flex-direction:column;align-items:center;gap:8px;padding:6px;border-radius:10px;cursor:pointer;transition:transform .15s, box-shadow .15s}
  .avatarOption img{width:120px;height:120px;object-fit:contain;border-radius:12px}
  .avatarOption:hover{transform:translateY(-6px);box-shadow:0 8px 24px rgba(0,0,0,0.6)}
  .avatarOption.selected{outline:3px solid rgba(79,209,197,0.3);transform:scale(1.03)}
  
  input#playerName{padding:10px 12px;border-radius:10px;border:2px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit;width:260px;text-align:center}
  
  .mapHeader{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  .mapAvatar{width:200px;height:200px;border-radius:10px;object-fit:cover}
  .hud{display:flex;gap:18px;align-items:center}
  
  .mapWrap{position:relative;width:100%;height:420px;border-radius:12px;overflow:hidden;background:rgba(0,0,0,0.08);display:flex;align-items:center;justify-content:center}
  .mapImage{max-width:100%;max-height:100%;object-fit:cover;opacity:0.9}
  .mapNodes{position:absolute;inset:0;pointer-events:none}
  
  /* nodes (levels) */
  .mapNode{
    position:absolute;pointer-events:auto;
    width:84px;height:84px;border-radius:999px;
    display:flex;align-items:center;justify-content:center;
    cursor:pointer;transition:transform .15s, box-shadow .15s;
    font-weight:700;
    color:#022;
  }
  .mapNode.locked{background:rgba(255,255,255,0.06);color:var(--muted);pointer-events:auto;opacity:0.6}
  .mapNode.unlocked{background:linear-gradient(180deg,var(--accent),var(--accent2));box-shadow:0 8px 18px rgba(0,0,0,0.6)}
  .mapNode:hover{transform:translateY(-6px)}
  
  /* game */
  #questionArea {
    margin-block: 60px 30px;
  }
  #questionArea img {
    max-width: 100%; 
    max-height: 280px;   
    object-fit: contain; 
}
  #instructionArea{
    margin-top: 50px;
  }
  #optionsArea {
    display: flex;
  }
  .game-topbar {
    display: flex;
    justify-content: flex-start;
    width: 100%;
  }
  .game-topbar div{
    margin: 16px 16px 16px 16px;
    position: absolute;
    top: 0%;
  }
  #levelGameTopbar {
    left: 5%;
  }
  #scoreGameTopbar {
    left: 15%;
  }
  #timerGameTopbar {
    left: 45%;
  }
  #livesGameTopbar {
    left: 85%;
  }
  #gameScreen {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  #gameScreen.correct{
    animation: pulseCorrect 0.5s ease-out; /* MUDANÇA: Duração aumentada para 0.5s */
  }
  #gameScreen.wrong{
    animation: shakeSubtle 0.3s ease-in-out;
  }
  .optionCard {
    margin: 20px;
  }
  .gameHeader{display:flex;justify-content:space-between;gap:12px;align-items:center;margin-bottom:18px}
  .questionArea{display:flex;justify-content:center;align-items:center;min-height:220px}
  .optionsArea{display:flex;gap:18px;justify-content:center;align-items:center;flex-wrap:wrap}
  
  .optionCard{
    padding:12px;border-radius:12px;min-width:200px;min-height:120px;display:flex;align-items:center;justify-content:center;
    cursor:pointer;user-select:none;background:rgba(255,255,255,0.03);transition:transform .12s, box-shadow .12s;
  }
  .optionCard:hover{transform:translateY(-6px);box-shadow:0 10px 30px rgba(0,0,0,0.5)}
  .optionCard.correct{background:linear-gradient(90deg,#5cb85c33,#5cb85c20)}
  .optionCard.wrong{background:linear-gradient(90deg,#ff000033,#ff000020)}
  
  .optionCard img{max-width:160px;max-height:110px;object-fit:contain;border-radius:8px}
  
  @media (max-width:700px){
    .mapWrap{height:320px}
    .optionCard{min-width:140px;min-height:90px}
    .avatarOption img{width:86px;height:86px}
  }
  
  /* Transição suave entre telas */
  .hidden {
    display: none;
  }
  
  .fade-in {
    animation: fadeIn 0.3s ease forwards;
  }
  
  .fade-out {
    animation: fadeOut 0.3s ease forwards;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }
  
  @keyframes fadeOut {
    from { opacity: 1; }
    to   { opacity: 0; }
  }

  /* CORREÇÃO DO BUG 1: Transição suave entre perguntas */
  .question-area, .options-area {
    opacity: 1;
    transition: opacity 0.3s ease; /* A transição faz o fade-in/out */
  }
  
  .fade-out-question {
    opacity: 0; /* JS adiciona isso para sumir */
  }
  
  /* .fade-in-question { ... } <-- REMOVIDA */
  
#rankingList li {
  display: flex;
  align-items: center; 
  font-size: 1.1em;
  padding: 8px 0;
  border-bottom: 1px solid #eee;
}

#rankingList li:last-child {
  border-bottom: none;
}

.ranking-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%; 
  margin-right: 15px; 
  object-fit: cover;
}

.ranking-position {
  min-width: 30px; 
  font-weight: bold;
  color: #555;
}


/* --- Estilos de Feedback e Animações --- */
.feedback {
  min-height: 24px; 
  font-size: 1.4em;
  font-weight: bold;
  margin-top: 16px;
  position: relative; 
  /* MUDANÇA: Animação removida da classe base */
}
.feedback.correct {
  color: var(--accent2);
  text-shadow: 0 0 8px rgba(79, 209, 197, 0.5);
  animation: feedbackPop 0.5s ease-out; /* MUDANÇA: Animação movida para cá */
}
.feedback.wrong {
  color: #ff6b6b;
  text-shadow: 0 0 8px rgba(255, 107, 107, 0.5);
  animation: feedbackPop 0.5s ease-out; /* MUDANÇA: Animação movida para cá */
}

/* --- Keyframes para as Animações --- */

/* Animação de tremedeira (OK) */
@keyframes shakeSubtle {
  0%, 100% { transform: translate(-50%, -50%); }
  25% { transform: translate(-50.5%, -50%); }
  50% { transform: translate(-49.5%, -50%); }
  75% { transform: translate(-50.5%, -50%); }
}

/* MUDANÇA (BUG 2): Animação de "glow" para acerto */
@keyframes pulseCorrect {
  0% { 
    transform: translate(-50%, -50%) scale(1); 
    box-shadow: 0 0 0px rgba(79, 209, 197, 0); /* accent2 color, invisível */
  }
  50% { 
    transform: translate(-50%, -50%) scale(1.005); 
    box-shadow: 0 0 30px rgba(79, 209, 197, 0.4); /* Brilho verde! */
  }
  100% { 
    transform: translate(-50%, -50%) scale(1); 
    box-shadow: 0 0 0px rgba(79, 209, 197, 0); /* Volta ao normal */
  }
}

/* Animação para o texto do feedback (OK) */
@keyframes feedbackPop {
  0% { opacity: 0; transform: translateY(10px) scale(0.8); }
  50% { opacity: 1; transform: translateY(0) scale(1.1); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}